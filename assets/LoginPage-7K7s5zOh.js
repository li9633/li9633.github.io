import{d as I,r as a,_ as z,c as U,a as f,b as s,w as t,u as B,o as C,E as F,e as n,f as v,g as S,l as T,h as L}from"./index-CspVYnNq.js";import{E as N}from"./el-card-DnVpaAXS.js";import{E as q,a as P,b as R,c as $,l as M,d as w}from"./auth-CzanIOoI.js";const j=I("user",()=>{const i=a(""),r=a({username:""});function d(o){r.value=o}function u(o){i.value=o.toString()}return{token:i,userInfo:r,setUserInfo:d,setToken:u}},{persist:!0}),A={class:"auth-page"},D={class:"auth-container"},G={class:"auth-header"},H={class:"auth-footer"},J={__name:"LoginPage",setup(i){const r=B(),d=j(),u=a(null),o=a({username:"",password:""}),m=a(!1),E=a({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,message:"用户名长度不能小于4位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}]}),x=async()=>{try{await u.value.validate(),m.value=!0;const l=await M(o.value);d.setUserInfo({username:l.username}),w.success(l.msg),r.push("/")}catch(l){w.error(`登录失败: ${l.message||"未知错误"}`)}finally{m.value=!1}},b=()=>{r.push("/register")};return(l,e)=>{const _=F,g=R,p=P,k=$,h=q,y=L,V=N;return C(),U("div",A,[f("div",D,[s(V,{class:"auth-card",shadow:"hover"},{default:t(()=>[f("div",G,[s(_,{class:"title",tag:"b",size:"large"},{default:t(()=>e[2]||(e[2]=[n("登录")])),_:1,__:[2]}),s(_,{class:"subtitle",size:"small"},{default:t(()=>e[3]||(e[3]=[n("欢迎回来，请登录您的账户")])),_:1,__:[3]})]),s(h,{model:o.value,rules:E.value,ref_key:"loginForm",ref:u,class:"auth-form"},{default:t(()=>[s(p,{prop:"username"},{default:t(()=>[s(g,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=c=>o.value.username=c),placeholder:"用户名","prefix-icon":v(S),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{prop:"password"},{default:t(()=>[s(g,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=c=>o.value.password=c),type:"password",placeholder:"密码","prefix-icon":v(T),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,null,{default:t(()=>[s(k,{type:"primary",size:"large",onClick:x,loading:m.value,class:"auth-button"},{default:t(()=>e[4]||(e[4]=[n(" 登录 ")])),_:1,__:[4]},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),f("div",H,[s(_,null,{default:t(()=>e[5]||(e[5]=[n(" 还没有账户？ ")])),_:1,__:[5]}),s(y,{type:"primary",onClick:b},{default:t(()=>e[6]||(e[6]=[n("立即注册")])),_:1,__:[6]})])]),_:1})])])}}},W=z(J,[["__scopeId","data-v-96652520"]]);export{W as default};
