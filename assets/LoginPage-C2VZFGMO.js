import{d as V,r as a,_ as I,c as z,o as U,a as f,b as s,w as t,u as B,E as C,e as n,f as v,g as F,l as S,h as T}from"./index-DTtwFklr.js";import{E as L,a as N}from"./request-DnTouSOm.js";import{E as q,a as P,b as R,c as M,l as $}from"./auth-BLV3FCqd.js";const j=V("user",()=>{const i=a(""),r=a({username:""});function d(o){r.value=o}function u(o){i.value=o.toString()}return{token:i,userInfo:r,setUserInfo:d,setToken:u}},{persist:!0}),A={class:"auth-page"},D={class:"auth-container"},G={class:"auth-header"},H={class:"auth-footer"},J={__name:"LoginPage",setup(i){const r=B(),d=j(),u=a(null),o=a({username:"",password:""}),m=a(!1),w=a({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,message:"用户名长度不能小于4位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}]}),b=async()=>{try{await u.value.validate(),m.value=!0;const l=await $(o.value);d.setUserInfo({username:l.username}),N.success(l.msg),r.push("/")}catch(l){console.error(l)}finally{m.value=!1}},E=()=>{r.push("/register")};return(l,e)=>{const c=C,g=R,p=P,x=M,k=q,h=T,y=L;return U(),z("div",A,[f("div",D,[s(y,{class:"auth-card",shadow:"hover"},{default:t(()=>[f("div",G,[s(c,{class:"title",tag:"b",size:"large"},{default:t(()=>[...e[2]||(e[2]=[n("登录",-1)])]),_:1}),s(c,{class:"subtitle",size:"small"},{default:t(()=>[...e[3]||(e[3]=[n("欢迎回来，请登录您的账户",-1)])]),_:1})]),s(k,{model:o.value,rules:w.value,ref_key:"loginForm",ref:u,class:"auth-form"},{default:t(()=>[s(p,{prop:"username"},{default:t(()=>[s(g,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=_=>o.value.username=_),placeholder:"用户名","prefix-icon":v(F),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,{prop:"password"},{default:t(()=>[s(g,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=_=>o.value.password=_),type:"password",placeholder:"密码","prefix-icon":v(S),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(p,null,{default:t(()=>[s(x,{type:"primary",size:"large",onClick:b,loading:m.value,class:"auth-button"},{default:t(()=>[...e[4]||(e[4]=[n(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),f("div",H,[s(c,null,{default:t(()=>[...e[5]||(e[5]=[n(" 还没有账户？ ",-1)])]),_:1}),s(h,{type:"primary",onClick:E},{default:t(()=>[...e[6]||(e[6]=[n("立即注册",-1)])]),_:1})])]),_:1})])])}}},W=I(J,[["__scopeId","data-v-c1bb4951"]]);export{W as default};
